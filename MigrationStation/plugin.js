(function(m,N,f,g,r,n){"use strict";function c(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var p=c(f),b=c(g);async function y(){let e=b.default.installed.ghost,t=Object.keys(e).map(s=>[s,e[s]]),a={plugins:[]};for(const s of t)a.plugins.push({url:s[0],nest:await p.default.get(s[0]+"_CUMCORD_STORE")});return a}function R(e,t){let a=document.createElement("a");a.href=`data:,${encodeURIComponent(e)}`,a.setAttribute("download",t),a.click(),a.remove()}function E(){let e,t=document.createElement("input");t.setAttribute("accept","application/json"),t.setAttribute("type","file"),t.addEventListener("change",a,!1),t.click();function a(){e=this.files,t.remove(),e[0].text().then(s=>s)}}const i=r.findByProps("Sizes","Colors","Looks","DropdownSizes"),o=r.findByDisplayName("Card"),l=r.findByDisplayName("FormText"),u=r.findByDisplayName("FormTitle");function d({title:e,description:t,buttonText:a,buttonColor:s,buttonSize:D,buttonLook:k,buttonFunc:F}){return n.React.createElement(n.React.Fragment,null,n.React.createElement(o,{type:o.Types.PRIMARY,className:"beef-ms-settings-card"},n.React.createElement(u,{tag:u.Tags.H1},e),n.React.createElement(l,{className:"beef-ms-settings-card-description",type:l.Types.DESCRIPTION},t),n.React.createElement(i,{color:i.Colors[s]||i.Colors.BRAND,size:i.Sizes[D]||i.Sizes.SMALL,look:i.Looks[k]||i.Looks.FILLED,className:"beef-ms-settings-card-button",onClick:F},a)))}function S(e){return n.React.createElement(n.React.Fragment,null,n.React.createElement("div",{className:"beef-ms-settings-card-container"},n.React.createElement(d,{title:"Backup",description:"Creates a backup of your current installation, including plugins and plugin nests.",buttonText:"Backup",buttonSize:"MEDIUM",buttonFunc:async t=>{R(JSON.stringify(await y()),"backup.json")}}),n.React.createElement(d,{title:"Restore",description:"Restores from a backup of your current installation.",buttonText:"Restore",buttonSize:"MEDIUM",buttonFunc:async t=>{console.log(E())}})))}var h=()=>cumcord.patcher.injectCSS(".beef-ms-settings-card-container{display:flex;flex-direction:row;margin-bottom:.5rem}.beef-ms-settings-card-container .beef-ms-settings-card{width:100%;padding:20px;margin-left:.5rem}.beef-ms-settings-card-container .beef-ms-settings-card h1{margin-bottom:.25rem}.beef-ms-settings-card-container .beef-ms-settings-card .beef-ms-settings-card-description{margin-bottom:2rem}.beef-ms-settings-card-container .beef-ms-settings-card .beef-ms-settings-card-button{position:absolute;bottom:0;right:0;margin:.5rem}"),C=()=>{const e=[h()];return{onUnload(){_.forEachRight(e,t=>t())},settings:m.createElement(S)}};return C})(cumcord.modules.common.React,cumcord.pluginData,cumcord.modules.internal.idbKeyval,cumcord.plugins,cumcord.modules.webpack,cumcord.modules.common);
