(function(u,m,F,h,a,n,N,ee,M){"use strict";function j(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function I(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(s){if(s!=="default"){var d=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,d.get?d:{enumerable:!0,get:function(){return e[s]}})}}),r.default=e,Object.freeze(r)}var t=I(F),i=j(M);const[g,E,{GuildFeatures:T},x,l,f,v,o,{joinGuild:w},{getCurrentUser:C}]=a.batchFind(({findByProps:e,findByDisplayName:r})=>{r("SettingsView"),e("dirtyDispatch"),e("GuildFeatures"),r("FormTitle"),r("FormText"),r("FormDivider"),r("Switch"),e("Sizes","Colors","Looks","DropdownSizes"),e("joinGuild"),e("getCurrentUser")});var O=Object.freeze({__proto__:null,SettingsView:g,FluxDispatcher:E,GuildFeatures:T,FormTitle:x,FormText:l,FormDivider:f,Switch:v,Button:o,joinGuild:w,getCurrentUser:C});function B(e){return t.createElement("div",{className:"beef-meddle-settings-title"},t.createElement(x,{tag:"h1"},"Meddle"),t.createElement(l,null,"A tool for those who like to mess with the Maze."),t.createElement(l,{className:"beef-meddle-subtext"},"Currently very WIP"))}function z({items:e}){let[r,s]=t.useState(0);return t.createElement("div",null,t.createElement("div",{className:"beef-meddle-settings-section"},t.createElement(B,null),t.createElement(f,{className:"beef-meddle-settings-divider"}),t.createElement("div",{className:"beef-meddle-tabbar"},e.map((d,c)=>t.createElement("button",{className:"beef-meddle-button"+(c===r?" beef-meddle-selected":""),onClick:()=>s(c)},t.createElement(l,null,d.text))))),t.createElement(f,{className:"beef-meddle-settings-divider"}),t.createElement("div",{className:"beef-meddle-settings-section beef-meddle-tabbar-content"},t.createElement(h.ErrorBoundary,null,t.createElement(e[r].component,{goTo:s}))))}const D={modules:{...O}};function y(){delete window.Meddle}function S(){return n.persist.ghost.generalExposeObject&&!window.Meddle?window.Meddle=D:!n.persist.ghost.generalExposeObject&&window.Meddle&&y(),y}function $(e){return t.createElement("div",{className:"beef-meddle-settings-tab"},t.createElement("div",{class:"beef-meddle-switch-wrapper"},t.createElement(v,{checked:n.persist.ghost.generalExposeObject,onChange:r=>{n.persist.store.generalExposeObject=r,S()}}),t.createElement(l,null,"Expose a Meddle object on the window",t.createElement(l,{class:"beef-meddle-subtext"},"This contains several utilities such as some common Webpack modules."))))}const L=a.findByDisplayName("FormText"),G=a.findByDisplayName("Switch"),P=a.findByDisplayName("TextInput");a.findByDisplayName("Select",!1).SingleSelect;const k=e=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:e!==void 0?"1rem":0}),b=({k:e,depends:r,children:s})=>i.default.createElement("div",{style:k(r)},i.default.createElement(G,{checked:n.persist.ghost[e],disabled:r!==void 0&&!n.persist.ghost[r],onChange:d=>n.persist.store[e]=d}),i.default.createElement(L,{children:s})),R=({k:e,depends:r,children:s})=>i.default.createElement("div",{style:k(r)},i.default.createElement(P,{value:n.persist.ghost[e],disabled:r!==void 0&&!n.persist.ghost[r],onChange:d=>n.persist.store[e]=d}),i.default.createElement(L,{children:s})),W=e=>r=>(N.useNest(n.persist),e(r)),A=(e,r=n.persist)=>{for(const s in e)r.ghost[s]===void 0&&(r.store[s]=e[s])};function p({k:e,depends:r,children:s}){return t.createElement("div",{class:"beef-meddle-textbox-wrapper"},t.createElement(R,{k:e,depends:r},s))}function U(e){return t.createElement("div",{className:"beef-meddle-settings-tab"},t.createElement(b,{k:"dispatchLogEnabled"},"Log all FluxDispatcher calls to console"),t.createElement(b,{k:"dispatchWhiteListMode"},"Dispatch logger whitelist mode"),t.createElement(p,{k:"dispatchIgnoreList"},"FluxDispatcher calls to hide when not in whitelist mode (comma separated)"),t.createElement(p,{k:"dispatchWhiteList"},"FluxDispatcher calls to allow when in whitelist mode (comma separated)"))}function V({text:e,color:r,size:s,look:d,func:c}){return t.createElement(o,{color:o.Colors[r]||o.Colors.BRAND,size:o.Sizes[s]||o.Sizes.SMALL,look:o.Looks[d]||o.Looks.FILLED,className:"beef-ms-settings-card-button",onClick:c},e)}function J(e){return t.createElement("div",{className:"beef-meddle-settings-tab"},t.createElement(p,{k:"serverId"},"Server ID"),t.createElement(b,{k:"serverLurkMode"},"Join as lurker"),t.createElement(V,{text:"Join",size:"MEDIUM",func:async()=>{w(n.persist.ghost.serverId,{lurker:n.persist.ghost.serverLurkMode})}}))}function H(e){return t.createElement(h.ErrorBoundary,null,t.createElement("div",{className:"beef-meddle-settings"},t.createElement(z,{items:[{text:"General",component:$},{text:"FluxDispatcher",component:U},{text:"Servers",component:J}]})))}var q=()=>m.findAndPatch(()=>g,e=>m.after("getPredicateSections",e.prototype,(r,s)=>{if(s[1]?.section!="My Account")return;let d=s.findIndex(Z=>Z.section=="changelog")-1;const c=[{section:"DIVIDER"},{section:"HEADER",label:"Meddle"},{section:"beef_meddle_SETTINGS",label:"Settings",element:W(H)}];return s.splice(d,0,...c),s}));function K(){return m.after("dispatch",E,e=>{!n.persist.ghost.dispatchLogEnabled||n.persist.ghost.dispatchWhiteListMode&&!n.persist.ghost.dispatchWhiteList.split(",").includes(e[0].type)||n.persist.ghost.dispatchIgnoreList.split(",").includes(e[0].type)||console.log(e[0])})}var Q=()=>m.injectCSS(".beef-meddle-settings .beef-meddle-settings-title h1{margin-bottom:.2rem}.beef-meddle-settings .beef-meddle-settings-section{padding:1rem;border-radius:.5rem;background-color:var(--background-secondary)}.beef-meddle-settings .beef-meddle-settings-tab{padding:.25rem}.beef-meddle-settings .beef-meddle-settings-divider{margin-top:.5rem;margin-bottom:.5rem}.beef-meddle-subtext{font-size:x-small;color:var(--text-muted)}.beef-meddle-row{display:flex;gap:1rem}.beef-meddle-row :not(:last-child){flex:1}.beef-meddle-textbox-wrapper *{display:flex;flex-direction:column-reverse}.beef-meddle-textbox-wrapper * *{width:100%}.beef-meddle-switch-wrapper{display:flex;align-items:center;gap:.5rem}.beef-meddle-tabbar{padding:.25rem;display:flex;flex-direction:row;gap:.5rem}.beef-meddle-tabbar .beef-meddle-button *{cursor:pointer}.beef-meddle-tabbar *{padding:.2rem;border-radius:.3rem;width:fit-content;text-align:center;background:none}.theme-dark .beef-meddle-tabbar .beef-meddle-selected{background:rgba(255,255,255,.2666666667)}.theme-light .beef-meddle-tabbar .beef-meddle-selected{background:rgba(0,0,0,.2)}");A({dispatchLogEnabled:!1,dispatchIgnoreList:"",dispatchWhiteList:"",dispatchWhiteListMode:!1,serverId:"",serverLurkMode:!1,generalExposeObject:!0});const X=[S(),q(),K(),Q()];function Y(){_.forEachRight(X,e=>e())}return u.onUnload=Y,Object.defineProperty(u,"__esModule",{value:!0}),u})({},cumcord.patcher,cumcord.modules.common.React,cumcord.ui.components,cumcord.modules.webpack,cumcord.pluginData,cumcord.utils,cumcord.plugins,cumcord.modules.common.React);
